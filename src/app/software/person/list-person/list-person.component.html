<div class="content-topbar">
    <div>
        <h2>لیست تمام طرف حساب ها</h2>
        <span>
            طرف حساب
            <mat-icon class="icon-primary">arrow_back_ios</mat-icon>
            لیست تمام طرف حساب ها
        </span>
    </div>
    <div>
        <key-button (click)="onAddPerson()">
            <mat-icon class="material-icons-outlined list-add-button-icon">person_add</mat-icon> طرف حساب جدید
        </key-button>
    </div>
</div>
<div class="content-table">
    <div class="table">
        <table *ngIf="personListLoaded" mat-table [dataSource]="personsList" class="">
            <ng-container matColumnDef="نوع">
                <th mat-header-cell *matHeaderCellDef> نوع </th>
                <td mat-cell *matCellDef="let element"> {{ personTypeTextByNumber(element.personType) }} </td>
            </ng-container>

            <ng-container matColumnDef="نام">
                <th mat-header-cell *matHeaderCellDef> نام </th>
                <td mat-cell *matCellDef="let element"> {{ element.personName }} </td>
            </ng-container>

            <ng-container matColumnDef="کد ملی یا شماره اقتصادی">
                <th mat-header-cell *matHeaderCellDef> کد ملی یا شماره اقتصادی </th>
                <td mat-cell *matCellDef="let element">
                    <ng-container *ngIf="element.personType === 0">{{ element.nationalId }}</ng-container>
                    <ng-container *ngIf="element.personType !== 0">{{ element.economicCode }}</ng-container>
                </td>
            </ng-container>

            <ng-container matColumnDef="تاریخ ساخت">
                <th mat-header-cell *matHeaderCellDef> تاریخ ساخت </th>
                <td mat-cell *matCellDef="let element"> {{ element.createdDate | jdate }} </td>
            </ng-container>

            <ng-container matColumnDef="تلفن">
                <th mat-header-cell *matHeaderCellDef> تلفن </th>
                <td mat-cell *matCellDef="let element">
                    <ng-container *ngIf="element.tel && element.tel !== 'null'"> {{ element.tel }} </ng-container>
                    <ng-container *ngIf="!element.tel || element.tel === 'null'"> بدون تلفن </ng-container>
                </td>
            </ng-container>

            <ng-container matColumnDef="کد پستی">
                <th mat-header-cell *matHeaderCellDef> کد پستی </th>
                <td mat-cell *matCellDef="let element">
                    <ng-container *ngIf="element.zipCode && element.zipCode !== 'null'"> {{ element.zipCode }}
                    </ng-container>
                    <ng-container *ngIf="!element.zipCode || element.zipCode === 'null'"> بدون کد پستی </ng-container>
                </td>
            </ng-container>

            <ng-container matColumnDef="عملیات">
                <th mat-header-cell *matHeaderCellDef> عملیات </th>
                <td mat-cell *matCellDef="let element">
                    <div class="table-action-buttons">
                        <key-button matTooltip="حذف طرف حساب" (click)="onDeletePerson(element.code)" content="icon">
                            <mat-icon class="icon-red material-icons-outlined">delete</mat-icon>
                        </key-button>
                        <key-button matTooltip="ویرایش" (click)="onUpdatePerson(element.code)" content="icon">
                            <mat-icon class="icon-primary material-icons-outlined">edit_square</mat-icon>                       
                        </key-button>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="tableColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: tableColumns;"></tr>
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell table-no-data" [colSpan]="tableColumns.length">
                    هیچ داده ای یافت نشد
                </td>
            </tr>
        </table>
        <key-table-loading *ngIf="!personListLoaded" [columns]="tableColumns"></key-table-loading>
    </div>
</div>